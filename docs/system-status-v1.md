# ã‚·ã‚¹ãƒ†ãƒ ç¾çŠ¶ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ v1 â€” æ”¹å–„10é …ç›®å®Œäº†å¾Œãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³

**ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆæ—¥æ™‚**: 2025-02-09  
**ã‚³ãƒŸãƒƒãƒˆ**: `a986c13` (main)  
**ç›®çš„**: æ”¹å–„10é …ç›®ã®å®Ÿè£…ç›´å¾Œã®çŠ¶æ…‹ã‚’è¨˜éŒ²ã€‚ä»Šå¾Œã®å®Ÿç¸¾è©•ä¾¡ãƒ»æ¬¡å›žä¼ç”»ã®ã‚¹ã‚¿ãƒ¼ãƒˆåœ°ç‚¹ã€‚

---

## ðŸ“Œ ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ä½¿ã„æ–¹

æ¬¡å›žã®ä¼ç”»ç«‹æ¡ˆæ™‚ã«ã€ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å‚ç…§ã—ã¦:
1. **å¤‰æ›´å‰ãƒ‘ãƒ•ã‚©ãƒ¼ãƒžãƒ³ã‚¹** (æ”¹å–„å‰ã®å•é¡Œãƒ‡ãƒ¼ã‚¿) ã¨ **ç¾åœ¨ã®è¨­å®šå€¤** ã‚’æ¯”è¼ƒ
2. ä¸€å®šæœŸé–“é‹ç”¨å¾Œã®å®Ÿç¸¾ãƒ‡ãƒ¼ã‚¿ã¨ç…§ã‚‰ã—åˆã‚ã›ã¦æ”¹å–„åŠ¹æžœã‚’æ¸¬å®š
3. æ–°ãŸãªæ”¹å–„ãƒã‚¤ãƒ³ãƒˆã‚’ç‰¹å®š

```
è©•ä¾¡æ‰‹é †:
1. DynamoDB trades ãƒ†ãƒ¼ãƒ–ãƒ«ã‹ã‚‰ a986c13 ãƒ‡ãƒ—ãƒ­ã‚¤å¾Œã®å–å¼•ã‚’æŠ½å‡º
2. å‹çŽ‡ã€P/Lã€ä¿æœ‰æ™‚é–“ã€é€šè²¨åˆ†å¸ƒã‚’é›†è¨ˆ
3. æœ¬ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ã€Œæ”¹å–„å‰ãƒ‘ãƒ•ã‚©ãƒ¼ãƒžãƒ³ã‚¹ã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã¨æ¯”è¼ƒ
4. å„æ”¹å–„é …ç›®ã®åŠ¹æžœã‚’å€‹åˆ¥ã«è©•ä¾¡
```

---

## ðŸ“Š æ”¹å–„å‰ãƒ‘ãƒ•ã‚©ãƒ¼ãƒžãƒ³ã‚¹ï¼ˆãƒ™ãƒ³ãƒãƒžãƒ¼ã‚¯ï¼‰

> **ãƒ‡ãƒ¼ã‚¿å–å¾—æ—¥**: 2025-02-09ã€€æ”¹å–„å®Ÿè£…å‰ã®DynamoDBãƒ€ãƒ³ãƒ—å…¨å–å¼•43ä»¶ã‹ã‚‰ç®—å‡º
>
> âš ï¸ **æ³¨æ„**: DynamoDBã®entry_price/amountã¯ãƒã‚°ã§è†¨å¼µã—ã¦ãŠã‚Šã€per-tradeã®P/Lè¨ˆç®—ã¯ä¿¡é ¼ã§ããªã„ã€‚
> å®Ÿéš›ã®P/Lã¯Coincheckå£åº§æ®‹é«˜ã®å¤‰å‹•ï¼ˆÂ¥130,000 â†’ Â¥ç´„100,000ï¼‰ã‹ã‚‰ç¢ºå®šã€‚

| æŒ‡æ¨™ | å€¤ | å‚™è€ƒ |
|------|-----|------|
| é–‹å§‹è³‡é‡‘ | **Â¥130,000** | Coincheckå…¥é‡‘é¡ |
| ç¾åœ¨æ®‹é«˜ | **Â¥ç´„100,000** | æ”¹å–„å®Ÿè£…æ™‚ç‚¹ |
| å®Ÿæå¤± | **Â¥ç´„30,000** (ç´„23%) | å£åº§æ®‹é«˜å·®åˆ† |
| å‹çŽ‡ | **9.3%** (4å‹/39æ•—) | ç›®æ¨™: 40%+ |
| ãƒ—ãƒ­ãƒ•ã‚£ãƒƒãƒˆãƒ•ã‚¡ã‚¯ã‚¿ãƒ¼ | **0.27** | ç›®æ¨™: 1.0+ |
| å–å¼•ç·æ•° | 43ä»¶ | ãƒã‚°å½±éŸ¿å«ã‚€ |
| entry_priceãƒã‚°å½±éŸ¿ä»¶æ•° | ç´„26ä»¶ | ä¿®æ­£æ¸ˆ(commit 45642e7) |
| å¹³å‡ä¿æœ‰æ™‚é–“ | **ç´„5åˆ†** (41/43ä»¶) | ã»ã¼å³å£²ã‚Š |
| XRPé›†ä¸­çŽ‡ | **35%** (15/43ä»¶) | åã‚Šã‚ã‚Š |
| SL/TPç™ºå‹•å›žæ•° | **0å›ž** | å…¨å–å¼•ãŒã‚·ã‚°ãƒŠãƒ«å£²ã‚Š |
| BUYç™ºç«çŽ‡ | **35%** (281/810ã‚·ã‚°ãƒŠãƒ«) | é«˜ã™ãŽ |

### è‡´å‘½çš„ãƒ‘ã‚¿ãƒ¼ãƒ³ (æ”¹å–„ã‚¿ãƒ¼ã‚²ãƒƒãƒˆ)

| ãƒ‘ã‚¿ãƒ¼ãƒ³ | ä»¶æ•° | å¯¾å¿œã—ãŸæ”¹å–„ |
|----------|------|------------|
| BUYâ†’5åˆ†ä»¥å†…SELL | 41ä»¶/43ä»¶ | #2 æœ€ä½Žä¿æœ‰æ™‚é–“ |
| XRPé›†ä¸­ | 15ä»¶/43ä»¶ | #6 é€šè²¨åˆ†æ•£ |
| å½ MACDã‚·ã‚°ãƒŠãƒ« | å…¨ä»¶ | #1 MACD EMA(9) |
| BB 60%ãƒ‡ãƒƒãƒ‰ã‚¾ãƒ¼ãƒ³ | å…¨ä»¶ | #3 BBç·šå½¢åŒ– |
| Chronoså®Ÿè³ªç„¡æ©Ÿèƒ½ | å…¨ä»¶ | #4 ã‚¹ã‚±ãƒ¼ãƒ«ä¿®æ­£ |
| BUYé–¾å€¤ä½Žã™ãŽ | 35%ç™ºç« | #9 é–¾å€¤å¼•ä¸Šã’ |

---

## ðŸ”§ ç¾åœ¨ã®è¨­å®šå€¤ä¸€è¦§

### Aggregator (`services/aggregator/handler.py`)

| ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ | ç’°å¢ƒå¤‰æ•° | ç¾åœ¨å€¤ | æ”¹å–„å‰ | å¤‰æ›´ç†ç”± |
|-----------|---------|--------|--------|---------|
| ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«é‡ã¿ | `TECHNICAL_WEIGHT` | **0.55** | 0.45 | #15 ãƒ‡ãƒ¼ã‚¿ãƒ‰ãƒªãƒ–ãƒ³åˆ†æžã§Teché‡è¦– |
| Chronosé‡ã¿ | `AI_PREDICTION_WEIGHT` | **0.30** | 0.40 | #15 near-zero 52%ã®ãŸã‚å‰Šæ¸› |
| ã‚»ãƒ³ãƒãƒ¡ãƒ³ãƒˆé‡ã¿ | `SENTIMENT_WEIGHT` | 0.15 | 0.15 | å¤‰æ›´ãªã— |
| BUYåŸºæº–é–¾å€¤ | `BASE_BUY_THRESHOLD` | **0.30** | 0.20 | #9 ç™ºç«çŽ‡å‰Šæ¸› |
| SELLåŸºæº–é–¾å€¤ | `BASE_SELL_THRESHOLD` | -0.20 | -0.20 | å¤‰æ›´ãªã— |
| BBå¹…åŸºæº– | `BASELINE_BB_WIDTH` | 0.03 | 0.03 | å¤‰æ›´ãªã— |
| æœ€ä½Žä¿æœ‰æ™‚é–“ | `MIN_HOLD_SECONDS` | **1800** (30åˆ†) | ãªã— | #2 å³å£²ã‚Šé˜²æ­¢ |
| é€šè²¨æœ€å¤§åŒæ™‚ä¿æœ‰ | `MAX_POSITIONS_PER_PAIR` | **1** | åˆ¶é™ãªã— | #6 åˆ†æ•£ |

### Technical (`services/technical/handler.py`)

| æ©Ÿèƒ½ | ç¾åœ¨ã®å®Ÿè£… | æ”¹å–„å‰ | å¤‰æ›´ã‚³ãƒŸãƒƒãƒˆ |
|------|-----------|--------|------------|
| MACDã‚·ã‚°ãƒŠãƒ«ãƒ©ã‚¤ãƒ³ | **EMA(9) of MACD series** | `macd * 0.9` (å½) | `95ef463` |
| BBã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚° | **ç·šå½¢ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³** + ãƒãƒ³ãƒ‰å¤–1.2xãƒœãƒ¼ãƒŠã‚¹ | ã‚¹ãƒ†ãƒƒãƒ—é–¢æ•° (0.2/0.8) | `5c12caa` |
| MACDã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚° | **ãƒ’ã‚¹ãƒˆã‚°ãƒ©ãƒ æŒ¯å¹…ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³** (price%æ­£è¦åŒ–) | ãƒã‚¤ãƒŠãƒª (MACD>signalâ†’+w) | `8211ac1` |
| RSIè¨ˆç®—æ–¹å¼ | **Wilder's æŒ‡æ•°å¹³æ»‘** (SMA init + EMA) | å˜ç´”å¹³å‡ | `8211ac1` |
| ATR/ADXè¨ˆç®— | **æ­£å¼OHLC True Range** (H-L, |H-PrevC|, |L-PrevC|) | closeè¿‘ä¼¼ | `8211ac1` |
| Volumeã‚·ã‚°ãƒŠãƒ« | **å‡ºæ¥é«˜ä¹—æ•° 1.0-1.3** (20æœ¬å¹³å‡æ¯”ã€1.5xã§é–‹å§‹) | ãªã— | `8211ac1` |
| ãƒ¬ã‚¸ãƒ¼ãƒ æ¤œçŸ¥ | **ADXåˆ¤å®š** (>25:ãƒˆãƒ¬ãƒ³ãƒ‰, <20:ãƒ¬ãƒ³ã‚¸) | ãªã— | `5c12caa` |
| ãƒ¬ã‚¸ãƒ¼ãƒ åˆ¥ã‚¦ã‚§ã‚¤ãƒˆ | ãƒˆãƒ¬ãƒ³ãƒ‰: MACD/SMA=0.35, RSI/BB=0.15 | å‡ç­‰ 0.25 | `5c12caa` |
|  | ãƒ¬ãƒ³ã‚¸: RSI/BB=0.35, MACD/SMA=0.15 |  |  |
| å‡ºåŠ›æŒ‡æ¨™ | RSI, MACD, SMA, BB, **ADX, ATR, ATR%, regime** | ADX/ATR/regimeãªã— | `5c12caa` |

### Chronos Caller (`services/chronos-caller/handler.py`)

| ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ | ç¾åœ¨å€¤ | æ”¹å–„å‰ | å¤‰æ›´ç†ç”± |
|-----------|--------|--------|---------|
| ã‚¹ã‚³ã‚¢å¤‰æ›ã‚¹ã‚±ãƒ¼ãƒ« | **Â±1% = Â±1.0** | Â±5% = Â±1.0 | #4 Chronoså®Ÿè³ªæ©Ÿèƒ½åŒ– |
| äºˆæ¸¬ã‚¹ãƒ†ãƒƒãƒ— | 12 | 12 | å¤‰æ›´ãªã— |
| ã‚µãƒ³ãƒ—ãƒ«æ•° | 20 | 20 | å¤‰æ›´ãªã— |
| å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ | **Typical Price (H+L+C)/3** | closeã®ã¿ | ãƒ­ãƒ¼ã‚½ã‚¯è¶³ã®é‡å¿ƒã‚’åæ˜  |
| ãƒ‡ã‚³ãƒ¼ãƒ‰ | **KVã‚­ãƒ£ãƒƒã‚·ãƒ¥ä»˜ã** (decoder_with_past) | ãƒ•ãƒ«ãƒ‡ã‚³ãƒ¼ãƒ‰ | #16 O(nÂ²)â†’O(n) |

### Position Monitor (`services/position-monitor/handler.py`)

| æ©Ÿèƒ½ | ç¾åœ¨ã®å®Ÿè£… | æ”¹å–„å‰ |
|------|-----------|--------|
| SL | -5% (å›ºå®šåˆæœŸå€¤) | -5% |
| TP | +10% (å›ºå®šåˆæœŸå€¤) | +10% |
| ãƒˆãƒ¬ãƒ¼ãƒªãƒ³ã‚°ã‚¹ãƒˆãƒƒãƒ— | **å«ã¿ç›Š+3%â†’SL=å»ºå€¤, +5%â†’SL=+3%, +8%â†’SL=+6%** | ãªã— |
| SLå¼•ä¸Šã’æ°¸ç¶šåŒ– | **DynamoDBæ›´æ–°** | ãªã— |
| SLå¼•ä¸Šã’é€šçŸ¥ | **Slack ðŸ“ˆ** | ãªã— |
| entry_priceç•°å¸¸æ¤œçŸ¥ | 50%ä¹–é›¢ã§ã‚¹ã‚­ãƒƒãƒ— | 50%ä¹–é›¢ã§ã‚¹ã‚­ãƒƒãƒ— |

### Order Executor (`services/order-executor/handler.py`)

| æ©Ÿèƒ½ | ç’°å¢ƒå¤‰æ•° | ç¾åœ¨å€¤ | å‚™è€ƒ |
|------|---------|--------|------|
| ã‚µãƒ¼ã‚­ãƒƒãƒˆãƒ–ãƒ¬ãƒ¼ã‚«ãƒ¼ | `CIRCUIT_BREAKER_ENABLED` | **false** (OFF) | #10 |
| æ—¥æ¬¡æå¤±ä¸Šé™ | `CB_DAILY_LOSS_LIMIT_JPY` | 15,000 | 24hç´¯è¨ˆ (è³‡é‡‘ã®ç´„12%) |
| é€£æ•—ä¸Šé™ | `CB_MAX_CONSECUTIVE_LOSSES` | 5 | é€£ç¶šè² ã‘å›žæ•° |
| å†·å´æ™‚é–“ | `CB_COOLDOWN_HOURS` | 6 | ãƒˆãƒªãƒƒãƒ—å¾Œã®å¾…æ©Ÿ |
| æœ€å¤§ãƒã‚¸ã‚·ãƒ§ãƒ³é¡ | `MAX_POSITION_JPY` | 15,000 | å¤‰æ›´ãªã— |
| äºˆå‚™è³‡é‡‘ | `RESERVE_JPY` | 1,000 | å¤‰æ›´ãªã— |
| æœ€å°æ³¨æ–‡é¡ | `MIN_ORDER_JPY` | 500 | å¤‰æ›´ãªã— |

---

## âœ… å®Ÿè£…æ¸ˆã¿æ”¹å–„10é …ç›®

| # | æ”¹å–„å†…å®¹ | ã‚³ãƒŸãƒƒãƒˆ | ãƒ‡ãƒ—ãƒ­ã‚¤æ—¥ | Lambda |
|---|---------|---------|-----------|--------|
| 1 | MACDã‚·ã‚°ãƒŠãƒ«ãƒ©ã‚¤ãƒ³ EMA(9) ä¿®æ­£ | `95ef463` | 2025-02-09 | technical |
| 2 | æœ€ä½Žä¿æœ‰æ™‚é–“ 30åˆ† | `8e582d0` | 2025-02-09 | aggregator |
| 3 | BBç·šå½¢ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³åŒ– | `5c12caa` | 2025-02-09 | technical |
| 4 | Chronosã‚¹ã‚³ã‚¢ã‚¹ã‚±ãƒ¼ãƒ« Â±5%â†’Â±1% | `95ef463` | 2025-02-09 | chronos-caller |
| 5 | ãƒˆãƒ¬ãƒ¼ãƒªãƒ³ã‚°ã‚¹ãƒˆãƒƒãƒ— 3æ®µéšŽ | `5c12caa` | 2025-02-09 | position-monitor |
| 6 | é€šè²¨åˆ†æ•£ MAX_POSITIONS_PER_PAIR=1 | `5c12caa` | 2025-02-09 | aggregator |
| 7 | ADXãƒ¬ã‚¸ãƒ¼ãƒ æ¤œçŸ¥ + é©å¿œåž‹ã‚¦ã‚§ã‚¤ãƒˆ | `5c12caa` | 2025-02-09 | technical |
| 8 | ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«æŒ‡æ¨™æ‹¡å…… (ADX/ATR/ATR%) | `5c12caa` | 2025-02-09 | technical |
| 9 | BUYé–¾å€¤ 0.20â†’0.30 | `5c12caa` | 2025-02-09 | aggregator |
| 10 | ã‚µãƒ¼ã‚­ãƒƒãƒˆãƒ–ãƒ¬ãƒ¼ã‚«ãƒ¼ (ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆOFF) | `a986c13` | 2025-02-09 | order-executor |

---

## ðŸ—ï¸ ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆ (2025-02-09æ™‚ç‚¹)

### Lambdaé–¢æ•°ã¨ãƒãƒ¼ã‚¸ãƒ§ãƒ³

| é–¢æ•°å | ä¸»è¦æ©Ÿèƒ½ | æœ€çµ‚ãƒ‡ãƒ—ãƒ­ã‚¤ |
|--------|---------|------------|
| `eth-trading-price-collector` | 6é€šè²¨ä¾¡æ ¼åŽé›† (Binance) + OHLCVä¿å­˜ | 2026-02-09 |
| `eth-trading-technical` | RSI(Wilder's)/MACD(ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³)/SMA/BB/ADX(OHLC)/ATR(OHLC)/Volume | 2026-02-09 |
| `eth-trading-chronos-caller` | ONNX Chronos-T5-Tiny äºˆæ¸¬ (KVã‚­ãƒ£ãƒƒã‚·ãƒ¥+Typical Price) | 2026-02-09 |
| `eth-trading-sentiment-getter` | CryptoPanic ã‚»ãƒ³ãƒãƒ¡ãƒ³ãƒˆ | - |
| `eth-trading-aggregator` | çµ±åˆã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚° (0.55/0.30/0.15) + å£²è²·åˆ¤å®š + analysis_context | 2026-02-09 |
| `eth-trading-order-executor` | Coincheck æˆè¡Œæ³¨æ–‡ + ã‚µãƒ¼ã‚­ãƒƒãƒˆãƒ–ãƒ¬ãƒ¼ã‚«ãƒ¼ + ãƒˆãƒ¬ãƒ¼ãƒ‰ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆä¿å­˜ | 2026-02-09 |
| `eth-trading-position-monitor` | SL/TP/ãƒˆãƒ¬ãƒ¼ãƒªãƒ³ã‚°ã‚¹ãƒˆãƒƒãƒ— | 2025-02-09 |
| `eth-trading-news-collector` | ãƒ‹ãƒ¥ãƒ¼ã‚¹åŽé›† + BTCç›¸é–¢åˆ†æž + é«˜åº¦NLPã‚»ãƒ³ãƒãƒ¡ãƒ³ãƒˆ | 2026-02-09 |
| `eth-trading-error-remediator` | ã‚¨ãƒ©ãƒ¼æ¤œçŸ¥â†’Slackâ†’è‡ªå‹•ä¿®å¾© | - |
| `eth-trading-warm-up` | åˆå›žãƒ‡ãƒ¼ã‚¿æŠ•å…¥ | - |

### AWSç’°å¢ƒ

| é …ç›® | å€¤ |
|------|-----|
| AWSã‚¢ã‚«ã‚¦ãƒ³ãƒˆ | 652679684315 |
| ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ | ap-northeast-1 |
| GitHub | kiikun0530/crypto-trader |
| Python | 3.12 (Lambda runtime) |

### ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

```
[5åˆ†é–“éš”] EventBridge â†’ price-collector â†’ DynamoDB(prices)
                                 â†“ (å¤‰å‹•â‰¥0.3% or 1hçµŒéŽ)
                          Step Functions
                              â†“ Map (Ã—6é€šè²¨)
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                technical  chronos  sentiment
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          aggregator
                              â†“ (BUY/SELLåˆ¤å®š)
                          SQS â†’ order-executor â†’ Coincheck API
                                                      â†“
[5åˆ†é–“éš”] EventBridge â†’ position-monitor â†’ SL/TP/ãƒˆãƒ¬ãƒ¼ãƒªãƒ³ã‚°åˆ¤å®š
                              â†“ (ãƒˆãƒªã‚¬ãƒ¼æ™‚)
                          SQS â†’ order-executor â†’ Coincheck API
```

---

## ðŸ“ˆ æ¬¡å›žè©•ä¾¡ã§è¦‹ã‚‹ã¹ãæŒ‡æ¨™

### åŸºæœ¬ãƒ‘ãƒ•ã‚©ãƒ¼ãƒžãƒ³ã‚¹ (æ”¹å–„å‰ã¨æ¯”è¼ƒ)

| æŒ‡æ¨™ | æ”¹å–„å‰ | ç›®æ¨™ | æ¸¬å®šæ–¹æ³• |
|------|--------|------|---------|
| å‹çŽ‡ | 9.3% | 40%+ | wins / total_trades |
| P/L | Â¥ç´„-30,000 (å£åº§: Â¥130Kâ†’Â¥100K) | ãƒ—ãƒ©ã‚¹è»¢æ› | Coincheckå£åº§æ®‹é«˜ã®å¤‰å‹• |
| ãƒ—ãƒ­ãƒ•ã‚£ãƒƒãƒˆãƒ•ã‚¡ã‚¯ã‚¿ãƒ¼ | 0.27 | 1.0+ | total_profit / total_loss |
| å¹³å‡ä¿æœ‰æ™‚é–“ | 5åˆ† | 30åˆ†+ | avg(exit_time - entry_time) |

> âš ï¸ **P/Lè¨ˆç®—ã®æ³¨æ„**: DynamoDBã®entry_price/amountã¯ãƒã‚°ã§è†¨å¼µã—ã¦ãŠã‚Šã€
> `(exit-entry)*amount` ã«ã‚ˆã‚‹è¨ˆç®—ã¯ä¿¡é ¼ã§ããªã„ã€‚
> æ¬¡å›žè©•ä¾¡æ™‚ã¯Coincheckå£åº§æ®‹é«˜ã®å¤‰å‹•ã§P/Lã‚’ç¢ºèªã™ã‚‹ã“ã¨ã€‚

### æ”¹å–„åŠ¹æžœã®å€‹åˆ¥æ¤œè¨¼

| æ”¹å–„ | æ¤œè¨¼æŒ‡æ¨™ | ç¢ºèªæ–¹æ³• |
|------|---------|---------|
| #2 æœ€ä½Žä¿æœ‰æ™‚é–“ | 5åˆ†ä»¥å†…å£²ã‚ŠãŒ0ä»¶ã«ãªã£ãŸã‹ | exit_time - entry_time ã®åˆ†å¸ƒ |
| #9 BUYé–¾å€¤ | BUYã‚·ã‚°ãƒŠãƒ«ç™ºç«çŽ‡ | signals ãƒ†ãƒ¼ãƒ–ãƒ«ã® BUY æ¯”çŽ‡ (35%â†’ç›®æ¨™20%ä»¥ä¸‹) |
| #6 é€šè²¨åˆ†æ•£ | XRPé›†ä¸­çŽ‡ã®ä½Žä¸‹ | é€šè²¨åˆ¥å–å¼•ä»¶æ•°ã®åˆ†å¸ƒ |
| #1 MACD | ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«ã‚¹ã‚³ã‚¢ã®åˆ†æ•£ | technical_score ã®æ¨™æº–åå·® |
| #4 Chronos | Chronosã‚¹ã‚³ã‚¢ã®åˆ†æ•£ | chronos_score ã®æ¨™æº–åå·® (0è¿‘å‚ã‹ã‚‰ã®è„±å´) |
| #3 BB | ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«ã‚¹ã‚³ã‚¢=0ã®å‰²åˆ | score=0.0 ã®ç™ºç”Ÿé »åº¦ |
| #5 ãƒˆãƒ¬ãƒ¼ãƒªãƒ³ã‚°ã‚¹ãƒˆãƒƒãƒ— | SLå¼•ä¸Šã’å›žæ•° | CloudWatch Logs "Trailing stop raised" |
| #7 ãƒ¬ã‚¸ãƒ¼ãƒ  | regimeåˆ¥ã®å‹çŽ‡ | signals ãƒ†ãƒ¼ãƒ–ãƒ«ã® regime ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ |
| #10 ã‚µãƒ¼ã‚­ãƒƒãƒˆãƒ–ãƒ¬ãƒ¼ã‚«ãƒ¼ | (OFFä¸­ã¯ä¸è¦) | ONæ™‚: ãƒˆãƒªãƒƒãƒ—å›žæ•° |

### ãƒ‡ãƒ¼ã‚¿å–å¾—ã‚¹ã‚¯ãƒªãƒ—ãƒˆ

```python
# è©•ä¾¡ç”¨ãƒ‡ãƒ¼ã‚¿å–å¾— (PowerShell)
aws dynamodb scan --table-name eth-trading-trades --output json > data/trades_v2.json
aws dynamodb scan --table-name eth-trading-positions --output json > data/positions_v2.json
aws dynamodb scan --table-name eth-trading-signals --output json > data/signals_v2.json
```

```python
# æ”¹å–„å¾Œã®å–å¼•ã®ã¿æŠ½å‡º (a986c13 ãƒ‡ãƒ—ãƒ­ã‚¤: 2025-02-09 02:12 UTC)
IMPROVEMENT_DEPLOY_TIMESTAMP = 1739064731  # 2025-02-09T02:12:11Z

# trades_v2.json ã‹ã‚‰ timestamp > IMPROVEMENT_DEPLOY_TIMESTAMP ã®ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’æŠ½å‡º
```

---

## â¸ï¸ ä¿ç•™ãƒ»ä»Šå¾Œã®æ¤œè¨Žäº‹é …

### ã‚µãƒ¼ã‚­ãƒƒãƒˆãƒ–ãƒ¬ãƒ¼ã‚«ãƒ¼ã®ONåˆ‡æ›¿
- ç¾åœ¨OFFã§é™è¦³ä¸­
- ä¸€å®šæœŸé–“ã®å®Ÿç¸¾ãƒ‡ãƒ¼ã‚¿ãŒæºœã¾ã£ãŸå¾Œã€é€£æ•—ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’åˆ†æžã—ã¦ONåˆ¤æ–­
- ONã«ã™ã‚‹å ´åˆ: Lambdaç’°å¢ƒå¤‰æ•° `CIRCUIT_BREAKER_ENABLED=true`

### å°†æ¥ã®æ”¹å–„å€™è£œ (ãƒ‡ãƒ¼ã‚¿è“„ç©å¾Œã«æ¤œè¨Ž)

| ã‚¢ã‚¤ãƒ‡ã‚¢ | å‰ææ¡ä»¶ |
|----------|---------|
| ã‚¹ã‚³ã‚¢é–¾å€¤ã®å¾®èª¿æ•´ | æ–°ãƒ‡ãƒ¼ã‚¿ã§BUYç™ºç«çŽ‡ã‚’ç¢ºèªå¾Œ |
| ãƒˆãƒ¬ãƒ¼ãƒªãƒ³ã‚°ã‚¹ãƒˆãƒƒãƒ—ã®æ®µéšŽè¿½åŠ  | åˆ©ç¢º/æåˆ‡ãƒ‘ã‚¿ãƒ¼ãƒ³ã®åˆ†æž |
| Chronos ãƒ¢ãƒ‡ãƒ«ã‚µã‚¤ã‚ºæ‹¡å¤§ | äºˆæ¸¬ç²¾åº¦ã®å®Ÿæ¸¬ãƒ‡ãƒ¼ã‚¿ |
| æ™‚é–“å¸¯åˆ¥ã‚¦ã‚§ã‚¤ãƒˆèª¿æ•´ | æ™‚é–“å¸¯åˆ¥å‹çŽ‡ãƒ‡ãƒ¼ã‚¿ |
| å–å¼•é‡(å‡ºæ¥é«˜)æŒ‡æ¨™ã®è¿½åŠ  | å‡ºæ¥é«˜ãƒ‡ãƒ¼ã‚¿ã®å–å¾—åŸºç›¤ | âœ… Phase 2 #14ã§å®Ÿè£… |
| ML/çµ±è¨ˆãƒ¢ãƒ‡ãƒ«ã«ã‚ˆã‚‹é–¾å€¤æœ€é©åŒ– | ååˆ†ãªå–å¼•ãƒ‡ãƒ¼ã‚¿ (100ä»¶+) |

---

## ðŸš€ Phase 2 å®Ÿè£…å®Œäº† (2026-02-09)

### å®Ÿè£…æ¸ˆã¿æ”¹å–„ 8+1 é …ç›®

| # | æ”¹å–„å†…å®¹ | ã‚³ãƒŸãƒƒãƒˆ | Lambda |
|---|---------|---------|--------|
| 11 | OHLCVãƒ‡ãƒ¼ã‚¿ä¿å­˜ãƒ»ATR/ADXæ­£å¼åŒ– | `8211ac1` | price-collector, technical |
| 12 | MACDãƒ’ã‚¹ãƒˆã‚°ãƒ©ãƒ ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ | `8211ac1` | technical |
| 13 | RSI Wilder'sæŒ‡æ•°å¹³æ»‘åŒ– | `8211ac1` | technical |
| 14 | Volumeã‚·ã‚°ãƒŠãƒ« (1.0-1.3xä¹—æ•°) | `8211ac1` | technical |
| 15 | ã‚¦ã‚§ã‚¤ãƒˆãƒ‡ãƒ¼ã‚¿ãƒ‰ãƒªãƒ–ãƒ³ (Tech=0.55, Chronos=0.30) | `8211ac1` | aggregator |
| 16 | KVã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ‡ã‚³ãƒ¼ãƒ‰ (decoder_with_past) | `8211ac1` | chronos-caller |
| 17 | NLPã‚»ãƒ³ãƒãƒ¡ãƒ³ãƒˆé«˜åº¦åŒ– (3æ®µéšŽ+å¦å®šèªž+ãƒ•ãƒ¬ãƒ¼ã‚º) | `8211ac1` | news-collector |
| 18 | ãƒˆãƒ¬ãƒ¼ãƒ‰ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆä¿å­˜ (analysis_context) | `8211ac1` | aggregator, order-executor |
| - | Chronos Typical Price (H+L+C)/3 | `90684dc` | chronos-caller |

### æ–°è¦è¨­å®šå€¤ (Phase 2 ã§å¤‰æ›´)

| ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ | Phase 1 | Phase 2 | å¤‰æ›´ç†ç”± |
|-----------|---------|---------|----------|
| ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«é‡ã¿ | 0.45 | **0.55** | 810ã‚·ã‚°ãƒŠãƒ«åˆ†æ•£æ¯”=0.57, ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«é‡è¦– |
| Chronosé‡ã¿ | 0.40 | **0.30** | near-zeroçŽ‡52%, äºˆæ¸¬å¯„ä¸ŽãŒä½Žã„ |
| MACDã‚¹ã‚³ã‚¢ | ãƒã‚¤ãƒŠãƒª | **ãƒ’ã‚¹ãƒˆã‚°ãƒ©ãƒ æŒ¯å¹…** | ä¾¡æ ¼æ¯”%æ­£è¦åŒ–ã€Â±0.1%=Â±1.0 |
| RSI | å˜ç´”å¹³å‡ | **Wilder's EMA** | å…¨ãƒ‡ãƒ¼ã‚¿æŒ‡æ•°å¹³æ»‘åŒ–ã§å®‰å®šåŒ– |
| ATR/ADX | closeè¿‘ä¼¼ | **æ­£å¼OHLC** | True Range = max(H-L, |H-Cå‰|, |L-Cå‰|) |
| Volume | æœªä½¿ç”¨ | **1.0-1.3xä¹—æ•°** | 20æœ¬å¹³å‡æ¯”1.5xä»¥ä¸Šã§å¢—å¹… |
| Chronoså…¥åŠ› | close | **Typical Price** | (H+L+C)/3 ã§å€¤å‹•ãã®é‡å¿ƒã‚’åæ˜  |
| Chronosãƒ‡ã‚³ãƒ¼ãƒ‰ | ãƒ•ãƒ«ãƒ‡ã‚³ãƒ¼ãƒ‰ | **KVã‚­ãƒ£ãƒƒã‚·ãƒ¥** | O(nÂ²)â†’O(n) æŽ¨è«–é«˜é€ŸåŒ– |
| NLPã‚»ãƒ³ãƒãƒ¡ãƒ³ãƒˆ | 60èªžã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ | **3æ®µéšŽå¼·åº¦+å¦å®šèªž+20+ãƒ•ãƒ¬ãƒ¼ã‚º** | Â±0.3â†’Â±0.4ç¯„å›² |
| ãƒˆãƒ¬ãƒ¼ãƒ‰è¨˜éŒ² | ä¾¡æ ¼ãƒ»æ•°é‡ã®ã¿ | **+åˆ†æžã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ** | component scores/weights/thresholds |

---

## ðŸ“ æ”¹å–„å®Ÿè£…ã®å…¨ã‚³ãƒŸãƒƒãƒˆå±¥æ­´

```
a986c13 feat: implement circuit breaker (#10) - default OFF, toggleable via env var
5c12caa feat: implement trading improvements #3,5,6,7,8,9
95ef463 feat: fix MACD signal line (EMA9) + Chronos score scale 5%â†’1%
8e582d0 feat: minimum hold period (30min) to prevent BUY->instant SELL loop
f6c29db fix(news-collector): fix panic_score scale (0-100 not 0-4), remove dead v1 sentiment field
45642e7 fix(critical): get_market_buy_fill order_id filter + entry_price sanity check
```
